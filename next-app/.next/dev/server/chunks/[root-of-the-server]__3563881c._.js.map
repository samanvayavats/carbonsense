{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/projects/carbonsense/lib/aichat.ts"],"sourcesContent":["const chatWithAi = async (message: string) => {\n  try {\n    const response = await fetch(\n      \"https://openrouter.ai/api/v1/chat/completions\",\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${process.env.OPENROUTER_API_KEY}`,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          model: \"tngtech/deepseek-r1t2-chimera:free\",\n          messages: [\n            {\n              role: \"system\",\n              content: `\n                    You are a carbon emission estimation assistant named CarbonSense.\n                    Your task is to calculate approximate carbon emissions for user activities.\n\n                    The user will send natural language inputs like:\n                    - \"I drove 10 km today\"\n                    - \"I used AC for 3 hours\"\n                    - \"I took a flight for 800 km\"\n\n                    You must always respond **only in JSON** format:\n                    {\n                      \"chat\": \"Friendly explanation in one short sentence about their carbon emission\",\n                      \"carbonEmission\": number (approximation in kilograms of CO2)\n                    }\n\n                    If unsure, make your best reasonable estimate based on common averages (for example, 10 km drive â‰ˆ 2.3 kg CO2). Do not include any text outside the JSON.\n            `,\n            },\n            {\n              role: \"user\",\n              content: message,\n            },\n          ],\n        }),\n      },\n    );\n\n    if (!response.ok) {\n      throw new Error(\"Failed to fetch AI response\");\n    }\n\n    const data = await response.json();\n\n    const rawResponse = data?.choices?.[0]?.message?.content || \"{}\";\n\n  \n    return rawResponse;\n  } catch (error: any) {\n    console.error(\"Error in chatWithAi:\", error.message);\n    return {\n      chat: \"Error occurred while getting AI response.\",\n      carbonEmission: 0,\n    };\n  }\n};\n\nexport default chatWithAi;\n"],"names":[],"mappings":";;;;AAAA,MAAM,aAAa,OAAO;IACxB,IAAI;QACF,MAAM,WAAW,MAAM,MACrB,iDACA;YACE,QAAQ;YACR,SAAS;gBACP,eAAe,CAAC,OAAO,EAAE,QAAQ,GAAG,CAAC,kBAAkB,EAAE;gBACzD,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB,OAAO;gBACP,UAAU;oBACR;wBACE,MAAM;wBACN,SAAS,CAAC;;;;;;;;;;;;;;;;YAgBZ,CAAC;oBACD;oBACA;wBACE,MAAM;wBACN,SAAS;oBACX;iBACD;YACH;QACF;QAGF,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,MAAM,cAAc,MAAM,SAAS,CAAC,EAAE,EAAE,SAAS,WAAW;QAG5D,OAAO;IACT,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,wBAAwB,MAAM,OAAO;QACnD,OAAO;YACL,MAAM;YACN,gBAAgB;QAClB;IACF;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///D:/projects/carbonsense/app/api/user/chat-with-ai/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport chatWithAi from \"@/lib/aichat\";\n\nexport async function POST(req: NextRequest, res: NextResponse) {\n  try {\n    const { chatFromUser } = await req.json();\n\n    if (!chatFromUser) {\n      return NextResponse.json(\n        {\n          message: \"input is required for chat\",\n        },\n        { status: 401 },\n      );\n    }\n\n    const response = await chatWithAi(chatFromUser);\n\n    return NextResponse.json(\n      {\n        message: \"data fetched\",\n        reposnse : JSON.parse(response)\n      },\n      { status: 200 },\n    );\n  } catch (error) {\n    console.log(\"the error at time of communicating with the ai is \", error);\n    return NextResponse.json(\n      {\n        message: \"Something went wrong at the time of fetching the data \",\n      },\n      { status: 500 },\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,GAAgB,EAAE,GAAiB;IAC5D,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,MAAM,IAAI,IAAI;QAEvC,IAAI,CAAC,cAAc;YACjB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBACE,SAAS;YACX,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,WAAW,MAAM,IAAA,0HAAU,EAAC;QAElC,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,UAAW,KAAK,KAAK,CAAC;QACxB,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,GAAG,CAAC,sDAAsD;QAClE,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;QACX,GACA;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}