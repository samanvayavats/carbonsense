{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///D:/projects/carbonsense/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nconst prismaClientSingleton = () => {\n  return new PrismaClient();\n};\n\ntype PrismaClientSingleton = ReturnType<typeof prismaClientSingleton>;\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClientSingleton | undefined;\n};\n\nconst prisma = globalForPrisma.prisma ?? prismaClientSingleton();\n\nexport default prisma;\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,wBAAwB;IAC5B,OAAO,IAAI,6IAAY;AACzB;AAIA,MAAM,kBAAkB;AAIxB,MAAM,SAAS,gBAAgB,MAAM,IAAI;uCAE1B;AAEf,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///D:/projects/carbonsense/lib/auth.ts"],"sourcesContent":["import CredentialsProvider from \"next-auth/providers/credentials\";\nimport prisma from \"@/lib/prisma\";\nimport bcrypt from \"bcrypt\";\nimport { SessionStrategy } from \"next-auth\";\n\nexport const authOptions = {\n  session: {\n    strategy: \"jwt\" as SessionStrategy,\n  },\n\n  providers: [\n    CredentialsProvider({\n      name: \"Credentials\",\n      credentials: {\n        username: { label: \"username\", type: \"text\" },\n        password: { label: \"password\", type: \"password\" },\n      },\n\n      async authorize(credentials) {\n        if (!credentials?.username || !credentials?.password) return null;\n\n        const user = await prisma.user.findUnique({\n          where: { name: credentials.username },\n        });\n\n        if (!user) return null;\n\n        const valid = await bcrypt.compare(credentials.password, user.password);\n        if (!valid) return null;\n\n        return {\n          id: String(user.id),\n          name: user.name,\n          email: user.email,\n        };\n      },\n    }),\n  ],\n\n  callbacks: {\n    async jwt({ token, user }: { token: any; user?: any }) {\n      if (user) {\n        token.id = user.id;\n        token.name = user.name;\n        token.email = user.email;\n      }\n      return token;\n    },\n\n    async session({ session, token }: { session: any; token: any }) {\n      session.user = {\n        id: token.id,\n        name: token.name,\n        email: token.email,\n      };\n      return session;\n    },\n  },\n\n  secret: process.env.NEXTAUTH_SECRET,\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAGO,MAAM,cAAc;IACzB,SAAS;QACP,UAAU;IACZ;IAEA,WAAW;QACT,IAAA,qKAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAO;gBAC5C,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YAEA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,YAAY,CAAC,aAAa,UAAU,OAAO;gBAE7D,MAAM,OAAO,MAAM,0HAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACxC,OAAO;wBAAE,MAAM,YAAY,QAAQ;oBAAC;gBACtC;gBAEA,IAAI,CAAC,MAAM,OAAO;gBAElB,MAAM,QAAQ,MAAM,gHAAM,CAAC,OAAO,CAAC,YAAY,QAAQ,EAAE,KAAK,QAAQ;gBACtE,IAAI,CAAC,OAAO,OAAO;gBAEnB,OAAO;oBACL,IAAI,OAAO,KAAK,EAAE;oBAClB,MAAM,KAAK,IAAI;oBACf,OAAO,KAAK,KAAK;gBACnB;YACF;QACF;KACD;IAED,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAA8B;YACnD,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,IAAI,GAAG,KAAK,IAAI;gBACtB,MAAM,KAAK,GAAG,KAAK,KAAK;YAC1B;YACA,OAAO;QACT;QAEA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAgC;YAC5D,QAAQ,IAAI,GAAG;gBACb,IAAI,MAAM,EAAE;gBACZ,MAAM,MAAM,IAAI;gBAChB,OAAO,MAAM,KAAK;YACpB;YACA,OAAO;QACT;IACF;IAEA,QAAQ,QAAQ,GAAG,CAAC,eAAe;AACrC","debugId":null}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["file:///D:/projects/carbonsense/app/api/community/delete-community/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\nimport prisma from \"@/lib/prisma\";\r\n\r\nexport async function DELETE(req: NextRequest) {\r\n    try {\r\n        const session = await getServerSession(authOptions);\r\n        const communityId = req.nextUrl.searchParams.get(\"communityId\");\r\n        console.log(\"the community id is \", communityId);\r\n\r\n        if (!session) {\r\n            return NextResponse.json(\r\n                { message: \"Not authenticated\" },\r\n                { status: 401 },\r\n            );\r\n        }\r\n\r\n        if (!communityId) {\r\n            return NextResponse.json(\r\n                { message: \"communityId is required\" },\r\n                { status: 401 },\r\n            );\r\n        }\r\n\r\n        const isCommunityExits = await prisma.communities.findUnique({\r\n            where: {\r\n                id: Number(communityId)\r\n            }\r\n        })\r\n\r\n        if (!isCommunityExits) {\r\n            return NextResponse.json(\r\n                { message: \"community does not exits\" },\r\n                { status: 401 },\r\n            );\r\n        }\r\n\r\n        const participant = await prisma.participants.deleteMany({\r\n            where: {\r\n                communityId: Number(communityId)\r\n            }\r\n        })\r\n\r\n        const community = await prisma.communities.delete({\r\n            where: {\r\n                id: Number(communityId)\r\n            }\r\n        })\r\n\r\n        return NextResponse.json({\r\n            message: 'the community has been deleted',\r\n            participant: participant,\r\n            community: community\r\n        }, { status: 200 })\r\n\r\n    } catch (error) {\r\n\r\n        console.log('the error at the time of deleting the community is : ', error)\r\n        return NextResponse.json(\r\n            { message: \"something went wrong at the time of deleting the community\" },\r\n            { status: 500 },\r\n        );\r\n\r\n    }\r\n\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,OAAO,GAAgB;IACzC,IAAI;QACA,MAAM,UAAU,MAAM,IAAA,2JAAgB,EAAC,4HAAW;QAClD,MAAM,cAAc,IAAI,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;QACjD,QAAQ,GAAG,CAAC,wBAAwB;QAEpC,IAAI,CAAC,SAAS;YACV,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,SAAS;YAAoB,GAC/B;gBAAE,QAAQ;YAAI;QAEtB;QAEA,IAAI,CAAC,aAAa;YACd,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,SAAS;YAA0B,GACrC;gBAAE,QAAQ;YAAI;QAEtB;QAEA,MAAM,mBAAmB,MAAM,0HAAM,CAAC,WAAW,CAAC,UAAU,CAAC;YACzD,OAAO;gBACH,IAAI,OAAO;YACf;QACJ;QAEA,IAAI,CAAC,kBAAkB;YACnB,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,SAAS;YAA2B,GACtC;gBAAE,QAAQ;YAAI;QAEtB;QAEA,MAAM,cAAc,MAAM,0HAAM,CAAC,YAAY,CAAC,UAAU,CAAC;YACrD,OAAO;gBACH,aAAa,OAAO;YACxB;QACJ;QAEA,MAAM,YAAY,MAAM,0HAAM,CAAC,WAAW,CAAC,MAAM,CAAC;YAC9C,OAAO;gBACH,IAAI,OAAO;YACf;QACJ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,SAAS;YACT,aAAa;YACb,WAAW;QACf,GAAG;YAAE,QAAQ;QAAI;IAErB,EAAE,OAAO,OAAO;QAEZ,QAAQ,GAAG,CAAC,yDAAyD;QACrE,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,SAAS;QAA6D,GACxE;YAAE,QAAQ;QAAI;IAGtB;AAEJ","debugId":null}}]
}